/**
 * SVGInjector v1.1.0 - Fast, caching, dynamic inline SVG DOM injection library
 * https://github.com/iconic/SVGInjector
 *
 * Copyright (c) 2014 Waybury <hello@waybury.com>
 * @license MIT
 */
!function(t,e){"use strict";var r="file:"===t.location.protocol,n=e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),i={},o=0,a=[],s={},l=function(t){return t.cloneNode(!0)},u=function(t,e){a[t]=a[t]||[],a[t].push(e)},c=function(t){for(var e=0,r=a[t].length;r>e;e++)!function(e){setTimeout(function(){a[t][e](l(i[t]))},0)}(e)},f=function(e,n){if(void 0!==i[e])i[e]instanceof SVGSVGElement?n(i[e].cloneNode(!0)):u(e,n);else{if(!t.XMLHttpRequest)return n("Browser does not support XMLHttpRequest"),!1;i[e]={},u(e,n);var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){if(404===o.status||null===o.responseXML)return n("Unable to load SVG file: "+e),r&&n("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),n(),!1;if(!(200===o.status||r&&0===o.status))return n("There was a problem injecting the SVG: "+o.status+" "+o.statusText),!1;if(o.responseXML instanceof Document)i[e]=o.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){var t;try{var a=new DOMParser;t=a.parseFromString(o.responseText,"text/xml")}catch(s){t=void 0}if(!t||t.getElementsByTagName("parsererror").length)return n("Unable to parse SVG file: "+e),!1;i[e]=t.documentElement}c(e)}},o.open("GET",e),o.overrideMimeType&&o.overrideMimeType("text/xml"),o.send()}},p=function(e,r,i,a){var l=e.getAttribute("data-src")||e.getAttribute("src");if(!/svg$/i.test(l))return void a("Attempted to inject a file with a non-svg extension: "+l);if(!n){var u=e.getAttribute("data-fallback")||e.getAttribute("data-png");return void(u?(e.setAttribute("src",u),a(null)):i?(e.setAttribute("src",i+"/"+l.split("/").pop().replace(".svg",".png")),a(null)):a("This browser does not support SVG and no PNG fallback was defined."))}e.setAttribute("src",""),f(l,function(n){if(void 0===n||"string"==typeof n)return a(n),!1;var i=e.getAttribute("id");i&&n.setAttribute("id",i);var u=e.getAttribute("title");u&&n.setAttribute("title",u);var c=e.getAttribute("class");if(c){var f=[n.getAttribute("class"),"iconic-injected-svg",c].join(" ");n.setAttribute("class",f)}var p=e.getAttribute("style");p&&n.setAttribute("style",p);var d=[].filter.call(e.attributes,function(t){return/^data-\w[\w\-]*$/.test(t.name)});Array.prototype.forEach.call(d,function(t){t.name&&t.value&&n.setAttribute(t.name,t.value)});for(var v,h=n.querySelectorAll("defs clipPath[id]"),g=0,y=h.length;y>g;g++){v=h[g].id+"-"+o;for(var b=n.querySelectorAll('[clip-path*="'+h[g].id+'"]'),m=0,A=b.length;A>m;m++)b[m].setAttribute("clip-path","url(#"+v+")");h[g].id=v}n.removeAttribute("xmlns:a");for(var w,S,x=n.querySelectorAll("script"),j=[],T=0,G=x.length;G>T;T++)S=x[T].getAttribute("type"),S&&"application/ecmascript"!==S&&"application/javascript"!==S||(w=x[T].innerText||x[T].textContent,j.push(w),n.removeChild(x[T]));if(j.length>0&&("always"===r||"once"===r&&!s[l])){for(var M=0,E=j.length;E>M;M++)new Function(j[M])(t);s[l]=!0}e.parentNode.replaceChild(n,e),o++,a(n)})};Array.prototype.forEach||(Array.prototype.forEach=function(t,e){if(void 0===this||null===this||"function"!=typeof t)throw new TypeError;var r,n=this.length>>>0;for(r=0;n>r;++r)r in this&&t.call(e,this[r],r,this)});var d=function(t,e,r){e=e||{};var n=e.evalScripts||"always",i=e.pngFallback||!1,o=e.each;if(void 0!==t.length){var a=0;Array.prototype.forEach.call(t,function(e){p(e,n,i,function(e){o&&"function"==typeof o&&o(e),r&&t.length===++a&&r(a)})})}else null!==t?p(t,n,i,function(t){o&&"function"==typeof o&&o(t),r&&r(1)}):r&&r(0)};"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=d:"function"==typeof define&&define.amd?define(function(){return d}):"object"==typeof t&&(t.SVGInjector=d)}(window,document);
//# sourceMappingURL=svg-injector.map.js